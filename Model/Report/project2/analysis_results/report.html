
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iEEG Data Analysis Report - Sensitivity/Specificity Focus</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; border-bottom: 2px solid #95a5a6; padding-bottom: 5px; margin-top: 30px; }
        .metric { display: inline-block; margin: 10px; padding: 15px; border: 2px solid #bdc3c7; border-radius: 5px; min-width: 150px; }
        .good { background-color: #d5f4e6; border-color: #27ae60; }
        .warning { background-color: #fef5e7; border-color: #f39c12; }
        .bad { background-color: #fadbd8; border-color: #e74c3c; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #3498db; color: white; }
        img { max-width: 100%; height: auto; margin: 15px 0; border: 1px solid #ddd; border-radius: 5px; }
        .summary-box { background-color: #ecf0f1; padding: 20px; border-radius: 5px; margin: 20px 0; }
        ul { line-height: 1.8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>iEEG Data Analysis Report</h1>
        <p><strong>Analysis Date:</strong> 2026-02-06 15:49:22</p>
        <p><strong>Experiment Configuration:</strong> exp_id=3</p>
        <p><strong>Evaluation Metrics:</strong> Sensitivity & Specificity</p>
        <p><strong>Medical Standard:</strong> Sensitivity ≥ 0.85 (avoid missing seizure detections)</p>

        <h2>Executive Summary</h2>

        <h3>Current CNN Model Performance</h3>
        <div class="metric good">
            <strong>Sensitivity:</strong> 0.919
        </div>
        <div class="metric good">
            <strong>Specificity:</strong> 0.973
        </div>
        <div class="metric">
            <strong>F1 Score:</strong> 0.013
        </div>
        <div class="metric">
            <strong>Accuracy:</strong> 0.973
        </div>

        <h3>Key Findings</h3>
        <ul>
            <li><strong>Cascade Feasibility:</strong> 86.3% high-confidence samples</li>
            <li><strong>Optimal Threshold:</strong> τ = 0.10</li>
            <li><strong>Performance at Threshold:</strong> Sensitivity = 0.944,
                Specificity = 0.977</li>
            <li><strong>Medical Requirements:</strong> ✓ Met
                (Sensitivity ≥ 0.85)</li>
            <li><strong>Frequency Features:</strong> beta band most discriminative
                (t-stat=6.49)</li>
            <li><strong>Channel Importance:</strong> Top channel = 113
                (t-stat=25.65)</li>
            <li><strong>Time-Domain Features:</strong> line_length most discriminative
                (t-stat=13.22)</li>
        </ul>

        <div class="summary-box">
            <h3>Cascade Architecture Recommendation</h3>
            <p><strong>Recommendation:</strong> Recommend Option B: FFT + MLP - beta band shows strong discriminability</p>
        </div>

        <h2>Detailed Analysis</h2>

        <h3>1. Confidence & Cascade Analysis (Core)</h3>
        <p>Analyze model confidence on different samples to determine the ratio of "easy" samples that can be handled by a simple model.</p>
        <img src="plots/confidence_distribution.png" alt="Confidence Distribution">
        <img src="plots/sensitivity_analysis_suite.png" alt="Sensitivity Analysis Suite">
        <img src="plots/sample_difficulty_pie.png" alt="Sample Difficulty">

        <h3>2. Frequency Feature Analysis</h3>
        <p>Analyze discriminability of different EEG frequency bands (delta, theta, alpha, beta, gamma).</p>
        <img src="plots/frequency_bands.png" alt="Frequency Bands">

        <h3>3. Channel Importance Analysis</h3>
        <p>Analyze the importance of 128 EEG channels for seizure detection. Identifies which channels are most discriminative.</p>
        <img src="plots/channel_importance.png" alt="Channel Importance">
        <img src="plots/channel_correlation.png" alt="Channel Correlation">

        <h3>4. Time-Domain Feature Analysis</h3>
        <p>Analyze discriminability of statistical time-domain features (mean, std, energy, line length, etc.).</p>
        <img src="plots/time_domain_features.png" alt="Time Domain Features">

        <h2>Conclusions & Recommendations</h2>

        <div class="summary-box">
            <h3>Data-Driven Recommendations:</h3>

            <p><strong>1. Cascade Feasibility Assessment</strong></p>
            <ul>
                <li>High-confidence sample ratio: 86.3%</li>
                <li>✓ Cascade architecture RECOMMENDED</li>
            </ul>

            <p><strong>2. Simple Model Design Recommendations</strong></p>
            <ul>
                <li>Frequency feature discriminability: beta band t-stat=6.49</li>
                <li>Recommend FFT+MLP (Option B)</li>
            </ul>

            <p><strong>3. Channel Selection Strategy</strong></p>
            <ul>
                <li>Top 5 most important channels: [113, 54, 53, 62, 63]</li>
                <li>Channel selector should learn attention weights focusing on these discriminative channels</li>
                <li>Top channel 113 shows t-stat=25.65</li>
            </ul>

            <p><strong>4. Feature Engineering Insights</strong></p>
            <ul>
                <li>Most discriminative time-domain feature: line_length (t-stat=13.22)</li>
                <li>Consider incorporating this feature in lightweight simple model</li>
            </ul>

            <p><strong>5. Performance Guarantee</strong></p>
            <ul>
                <li>MUST ensure simple model achieves sensitivity ≥ 0.85 on easy samples</li>
                <li>Complex model handles hard samples to guarantee overall sensitivity</li>
            </ul>
        </div>

        <hr>
        <p><em>Generated by analyze_data.py | Environment: remote</em></p>
    </div>
</body>
</html>
